---
id: dimension-table-management
sidebar_position: 6
---

# 维度表管理

## 简介

### 业务场景

如果您的业务分析中涉及到商品、门店、导购员等维度，需要分析用户行为在这些维度上的表现，比如按照商品的类别统计商品详情页浏览事件的数量、按照门店的类型统计订单数量、或按照导购员的级别看营收贡献；进一步地需要在组合维度下做分析，比如看某类型门店某类别商品的销售情况。

### 解决方案

如上分析场景，您可以使用维度表模型的属性扩展能力，灵活、高效地完成，同时不必冗繁地将这些维度的属性信息全部埋点在代码里，大大避免了漏埋错埋等问题的发生。

:::info

实施维度表模型的主要步骤：

- Step 1：维度表管理中，创建商品、门店、导购员等维度表，并上传数据到维度表里
- Step 2：事件属性中，关联维度表到对应的事件属性上
- Step 3：代码埋点里，上报关联了维度表的事件属性（维度表的主键ID，比如商品编号）

:::

### 维度表模型架构简图

![维度表模型架构简图](/img/e09d2601ed1d481aacea695e02bf897f8194537492a55edddd54300eb6e9b000_pic_1638264809601_2021-11-30.png)  

## 功能边界与约束

- 一张维度表仅支持关联到一个事件属性上
- 每张维度表至少包含一个字段，才能获得属性扩展能力
- 单张维度表的记录数建议在一百万以内，避免带来性能下降
- 由于维度表的字段在应用中使用最终归因的逻辑取值，维度表字段的值应尽量避免快速变化，保障统计分析中结果稳定
- 由于维度表以编号作为主键，因此维度表不适用于一对多关联的场景，即一个事件属性的值只能关联一条维度表记录。

## 功能说明

### 功能入口

![功能入口](/img/04e9d245c94c9aaff1867146f8f4bab0c25d79904b507295e2e198466b4f727b_pic_1638262361704_2021-11-30.png)  

### 创建维度表

点击“新建维度表”按钮，弹出的表单填写名称、标识符和描述后，点击“确定”，生成一张维度表。

![创建维度表](/img/5d5011399eb595fa35bf8573f79af1cb796af99131219a2f10637d45f025334d_pic_1638262418700_2021-11-30.png)  

### 查看维度表详情

点击列表行中名称、操作以外的其他列位置，即可查看该维度表的名称、标识符等详情。

![查看维度表详情](/img/8f8e4327a945d553c27c36de719fbb0c5eee014b3538559df913e3303f3b301b_pic_1638262460346_2021-11-30.png)  

### 编辑维度表

在维度表详情中点击“编辑”按钮，弹出的表单修改名称或描述后，点击“确定”，保存修改后的维度表信息。

![编辑维度表](/img/e0fb9a843f74acf87e9283d74a5ab3d8460b7c0dad44298db9c184fc773f1f47_pic_1638262497876_2021-11-30.png)  

### 删除维度表

点击某行维度表的操作列的更多图标，弹框中点击“删除按钮”，即可删除该维度表信息。

:::caution

删除维度表会导致依赖的分析图表失效，请谨慎操作

:::

### 管理维度表字段

维度表字段是维度表扩展事件属性的载体，在分析工具使用中，具有跟事件属性相似的能力。
点击某行维度表的名称列，进入维度表详情页，切换到表结构，可以对维度表字段进行管理。

![管理维度表字段](/img/135366efaaa1d6e72f1f8f77936e30b74209d547f0c70b530853abdd93365155.png)  



点击“新建字段”按钮，弹出的表单填写名称、标识符、类型和描述，即可添加新的字段。
支持的数据类型：字符串、整数、小数、列表、日期类型

![新建字段](/img/1e1271119f543bb8e1eb093efff49264872a6046d29aa3e4f09a5fa629e0fca7_pic_1638262710532_2021-11-30.png)  

### 上传维度表数据

支持界面上上传CSV文件数据，批量录入到维度表。操作步骤如下：

#### Step 1：下载模板

点击某维度表的操作列，弹窗中的“下载模板”按钮点击后，将该维度表的模板CSV文件下载到本地。

![下载模板](/img/aff78f9eb4f6a2b244fa635466ae2776fefb22cee6ac7b5059f3f2fb7b19a414_pic_1638262765149_2021-11-30.png)  

#### Step 2：编辑模板文件

编辑下载的模板文件，录入维度表数据。文件字段格式说明：

- 第一列（item_id）为固定列，即维度表的主键ID
- 其他列为该维度表字段的标识符
- 上传列表类型的字段，元素与元素之间使用'||'分割，如： 红色||绿色||蓝色 （列表类型值为空，是需要使用 '||' 占位）
- 上传日期类型的字段，日期格式'xxxx/xx/xx'，如： 2023/04/01 （由于WPS办公软件会针对日期格式进行固定格式的转化，您需要使用使用'前缀固定日期格式，如：'2023/04/01 ）

![编辑模板文件](/img/wenjianshangchuan.png)  

#### Step 3：导入数据

点击维度表行的操作列，弹窗中的“上传文件”按钮点击后，导入已录入数据的模板文件。

![上传文件](/img/b4387bc281618833be317584627ebb04c7a5f6be90abbfb2bb8adbd4e42cdc38_pic_1638262875616_2021-11-30.png)  

上传成功后，通过维度表的详情页，可查看该维度表数据更新后的行数。

![查看该维度表数据更新后的行数](/img/de7ec4305095ff3ffe37d640c49262b67ebe3d3b28a692375aa3d14380ce477b_pic_1638262902842_2021-11-30.png)  

### 维度表明细管理

![维度表明细管理入口](/img/72b87c68072b87ed4ec4f683c5c896e53c7b7bada73ef0e4bd5c271fff81d475.png)  

### 查看明细数据
点击维度表名称，进入维度表管理。在这里可以查看到您刚刚上传成功的维度表明细数据。

![查看明细数据](/img/b5f1ff2402a88aed3c4c7c5709add474df48dd771dae174c9728cd741f2fe9a9.png)  

#### 筛选数据
查看明细数据功能，会按照时间倒叙展示明细数据，最多展示100 条。您可以配置「筛选数据」，查看那些您更为关注的明细表详情数据。

#### 导入数据
可以使用导入数据完成对明细数据的修改或者追加。

场景——修改数据
###### step1：使用「筛选数据」，将您要修改的数据筛选出来。
###### step2：点击「导出数据」，将筛选出的明细数据导出。
###### step3：在导出的文件中，完成修改。
###### step4:  使用「导入数据」重新上传后。

场景——追加数据
###### 根据模版要求，继续补充要追加的明细数据，然后上传即可。

####  导出数据
导入当前维度表明细数据，该功能会受筛选条件影响，若配置了筛选条件，导出得则是过滤后的明细数据，如没有任何条件，导出的就是全部明细数据。

###  查看表结构
可以查看当前维度表有哪些自定义字段，并进行管理。支持新建自定义维度字段、修改字段信息、批量删除等操作。


![查看表结构](/img/08066bee3a61822260ca0b589c3f544e62cc3003f0237e5c3063e67453e6b86a.png)  


### 关联维度表到事件属性

事件属性编辑弹窗里，选择维度表关联到事件属性上。

![关联维度表到事件属性](/img/d3aeb7d069d6c4be2d3df66fe1037acbcf405aede05d549b49685825c4e6cc02_pic_1638262940508_2021-11-30.png)  

## 应用案例

维度表扩展事件属性的能力，在 GrowingIO 中被广泛应用。

### 案例1：在分析中，使用维度表做属性下钻

![案例1](/img/2376ec7b0d4ae8a1ed813890dddd11aec7253f54bb1d4940ab8144263ea1d939_pic_1638262998302_2021-11-30.png)  

### 案例2：在分析中，使用维度表做条件过滤

![案例2](/img/1e5091acc8ed6094a930937c8001eab2c45057820bb0db507f2d4c78e1994325_pic_1638263027103_2021-11-30.png)  

更多案例场景，请与GrowingIO人员交流。

## 常见问题

### Q：维度表的模板文件可以程序直接生成吗？这样可以由数据工程师一次性导出。

A：可以的。模板文件只是个逗号分隔的普通CSV文件，只要程序生成的文件满足以下几个条件，即可将文件上传到维度表中。
条件1：文件首行的列名符合规范，即首行第一列是item_id，其他列为该维度表的字段标识符，各列之间用英文逗号分隔。
条件2：文件的编码类型为UTF-8
条件3：文件的名称固定为{维度表标识符}.csv

### Q：维度表的数据可以通过接口调用写入吗？

A：可以的。通过集成服务端SDK上报，具体接口是维度表模型API。

### Q：再次上传维度表数据后，新的数据会覆盖原有数据吗？

A：维度表在使用上，其字段的取值逻辑是最终归因，即分析、洞察时使用该字段的最新上传值。
比如定义了商品维度表和颜色、种类两个字段：
第一次，导入3条商品记录，上传文件的内容如下：

```csv
item_id,color,type
123,红色,坚果1
456,绿色,坚果2
789,白色,坚果3
```

第二次，导入2条商品数据，上传文件的内容如下：

```csv
item_id,color,type
123,粉红色,坚果1
456,墨绿色,坚果2
```

那么，编号为123商品的颜色取值是粉红色，编号为456商品的颜色取值是墨绿色。

:::caution

由于维度表字段的取值逻辑是最终归因，意味着引用维度表做统计的单图等应用，统计结果的值会按照维度表的取值刷新计算结果。

:::

### Q：维度表支持关联维度表吗？

A：由于性能考量，不支持维度表的嵌套。